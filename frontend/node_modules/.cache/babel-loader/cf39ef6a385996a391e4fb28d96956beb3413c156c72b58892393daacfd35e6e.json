{"ast":null,"code":"import{json,redirect}from\"react-router-dom\";import EventForm from\"../components/EventForm\";import{jsx as _jsx}from\"react/jsx-runtime\";export default function NewEventPage(){return/*#__PURE__*/_jsx(EventForm,{method:\"POST\"});}export async function action(_ref){let{request,params}=_ref;const method=request.method;const data=await request.formData();const id=method==='PATCH'?params.id:'';const url='https://events-one-pi.vercel.app/events'+(method==='PATCH'?'/'+id:'');const enteredValue={title:data.get('title'),image:data.get('image'),date:data.get('date'),description:data.get('description')};const response=await fetch(url,{method:method,headers:{'Content-type':'application/json'},body:JSON.stringify(enteredValue)});if(response.status===422){return response;}if(!response.ok){throw json({message:'Could not save event'},{status:500});}return redirect('/events');}","map":{"version":3,"names":["json","redirect","EventForm","jsx","_jsx","NewEventPage","method","action","_ref","request","params","data","formData","id","url","enteredValue","title","get","image","date","description","response","fetch","headers","body","JSON","stringify","status","ok","message"],"sources":["C:/Users/Nancy/Desktop/Development/adv-starting-project/12-adv-starting-project/frontend/src/pages/NewEventPage.js"],"sourcesContent":["import { json, redirect } from \"react-router-dom\";\r\nimport EventForm from \"../components/EventForm\";\r\n\r\nexport default function NewEventPage() {\r\n    return <EventForm method='POST'/>\r\n}\r\n\r\nexport async function action ({request, params}) {\r\n    const method = request.method;\r\n    const data = await request.formData();\r\n    const id = method === 'PATCH' ? params.id : '';\r\n    const url = 'https://events-one-pi.vercel.app/events' + (method === 'PATCH' ? '/'+id : '');\r\n\r\n    const enteredValue = {\r\n        title: data.get('title'),\r\n        image: data.get('image'),\r\n        date: data.get('date'),\r\n        description: data.get('description')\r\n    } \r\n    \r\n    const response = await fetch(url, {\r\n        method: method,\r\n        headers: {'Content-type': 'application/json'},\r\n        body: JSON.stringify(enteredValue)\r\n    });\r\n\r\n    if(response.status === 422) {\r\n        return response;\r\n    }\r\n\r\n    if(!response.ok) {\r\n        throw json({message: 'Could not save event'}, {status: 500})\r\n    }\r\n\r\n    return redirect('/events');\r\n}"],"mappings":"AAAA,OAASA,IAAI,CAAEC,QAAQ,KAAQ,kBAAkB,CACjD,MAAO,CAAAC,SAAS,KAAM,yBAAyB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAEhD,cAAe,SAAS,CAAAC,YAAYA,CAAA,CAAG,CACnC,mBAAOD,IAAA,CAACF,SAAS,EAACI,MAAM,CAAC,MAAM,CAAC,CAAC,CACrC,CAEA,MAAO,eAAe,CAAAC,MAAMA,CAAAC,IAAA,CAAqB,IAAnB,CAACC,OAAO,CAAEC,MAAM,CAAC,CAAAF,IAAA,CAC3C,KAAM,CAAAF,MAAM,CAAGG,OAAO,CAACH,MAAM,CAC7B,KAAM,CAAAK,IAAI,CAAG,KAAM,CAAAF,OAAO,CAACG,QAAQ,CAAC,CAAC,CACrC,KAAM,CAAAC,EAAE,CAAGP,MAAM,GAAK,OAAO,CAAGI,MAAM,CAACG,EAAE,CAAG,EAAE,CAC9C,KAAM,CAAAC,GAAG,CAAG,yCAAyC,EAAIR,MAAM,GAAK,OAAO,CAAG,GAAG,CAACO,EAAE,CAAG,EAAE,CAAC,CAE1F,KAAM,CAAAE,YAAY,CAAG,CACjBC,KAAK,CAAEL,IAAI,CAACM,GAAG,CAAC,OAAO,CAAC,CACxBC,KAAK,CAAEP,IAAI,CAACM,GAAG,CAAC,OAAO,CAAC,CACxBE,IAAI,CAAER,IAAI,CAACM,GAAG,CAAC,MAAM,CAAC,CACtBG,WAAW,CAAET,IAAI,CAACM,GAAG,CAAC,aAAa,CACvC,CAAC,CAED,KAAM,CAAAI,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAACR,GAAG,CAAE,CAC9BR,MAAM,CAAEA,MAAM,CACdiB,OAAO,CAAE,CAAC,cAAc,CAAE,kBAAkB,CAAC,CAC7CC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAACX,YAAY,CACrC,CAAC,CAAC,CAEF,GAAGM,QAAQ,CAACM,MAAM,GAAK,GAAG,CAAE,CACxB,MAAO,CAAAN,QAAQ,CACnB,CAEA,GAAG,CAACA,QAAQ,CAACO,EAAE,CAAE,CACb,KAAM,CAAA5B,IAAI,CAAC,CAAC6B,OAAO,CAAE,sBAAsB,CAAC,CAAE,CAACF,MAAM,CAAE,GAAG,CAAC,CAAC,CAChE,CAEA,MAAO,CAAA1B,QAAQ,CAAC,SAAS,CAAC,CAC9B"},"metadata":{},"sourceType":"module","externalDependencies":[]}